/*!
 * ar-easy-validator v2.0.0
 * (c) 2020-2021 Armouy
 * Released under the MIT License.
 */
!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(r="undefined"!=typeof globalThis?globalThis:r||self).Validator=t()}(this,(function(){"use strict";var r={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},t=[">","<",">=","<=","==","==="],e={is_email:/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/,is_mobile:/^1[3456789][0-9]{9}$/,is_concat:/(^(\d{3,4}-)?\d{6,8}$)|(^1[3456789][0-9]{9}$)/,is_name:/^[\u4E00-\u9FA5]{2,4}$/,is_number:/^\d+$|^\d*\.\d+$/,is_bankcard:/^[0-9]{16,19}$/,is_age:/^(?:[1-9][0-9]?|1[01][0-9]|120)$/,is_money:/((^[1-9]\d*)|^0)(\.\d{0,2}){0,1}$/,is_positive_int:/^[0-9]+$/,is_chinese:/^[\u4E00-\u9FA5]+$/,is_english:/^[A-Za-z]+$/,is_url:/[a-zA-z]+:\/\/[^\s]/,is_id:/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|[xX])$/},i=function(r){var t=typeof r;return!!("undefined"===t||"string"===t&&0===r.length||"object"===t&&!r||"object"===t&&Array.isArray(r)&&0===r.length||"object"===t&&0===Object.keys(r).length)},n=function(r,t){return r===t?0!==r||0!==t||1/r==1/t:r!=r&&t!=t},s=function(r,t){if(n(r,t))return!0;if("object"!=typeof r||null===r||"object"!=typeof t||null===t)return!1;var e=Object.keys(r),i=Object.keys(t);if(e.length!==i.length)return!1;for(var s=0;s<e.length;s++){var a=e[s];if(!Object.prototype.hasOwnProperty.call(t,a)||!n(r[a],t[a]))return!1}return!0},a=function(r){return!i(r)},o=a,u=i,l=s,f=function(r){return e.is_email.test(r)},c=function(r){return e.is_mobile.test(r)},h=function(r){return e.is_concat.test(r)},d=function(r){return e.is_mobile.test(r)||/^[a-zA-Z][a-zA-Z\d_-]{5,19}$/.test(r)},y=function(r){return e.is_name.test(r)},b=function(r){return e.is_number.test(r)},v=function(r){return e.is_positive_int.test(r)},g=function(r){return e.is_bankcard.test(r)},p=function(r){return e.is_age.test(r)},w=function(r){return e.is_money.test(r)},_=function(r){return e.is_chinese.test(r)},m=function(r){return a(r)&&e.is_english.test(r)},j=function(r){return e.is_url.test(r)},A=function(t){var n=r,s=!0;if(!i(t)&&e.is_id.test(t)&&n[t.substr(0,2)]){if(18==t.length){t=t.split("");for(var a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=0,u=0;u<17;u++)o+=Number(t[u])*a[u];[1,0,"X",9,8,7,6,5,4,3,2][o%11]!=t[17].toUpperCase()&&(s=!1)}return null!=t&&s}return!1};function E(r){return"object"==typeof r&&"[object Object]"===Object.prototype.toString.call(r)}function O(r,t,e,i){if(!r||"string"!=typeof r)throw new Error("field is invaild in rules's item");if(t&&$.call(this,t),e&&!Array.isArray(e))throw new Error("need is invaild in rules's item");if(i&&"string"!=typeof i)throw new Error("tip is invaild in rules's item")}function $(r){var e=typeof r;if("string"!==e&&!E(r)&&!Array.isArray(r))throw new Error("rules should be string or object or array");if(!("string"!==e||"validate"!==r&&"addRule"!==r&&this.hasOwnProperty(r)))throw new Error("rules doesn't exist");if("object"!==e||Array.isArray(r)){if(Array.isArray(r)&&r.length>0)for(var i=0;i<r.length;i++){var n=r[i];if("string"!=typeof n&&!E(n))throw new Error("when rules is an array, it' children should be string or an object");$.call(this,n)}}else{var s=Object.keys(r);if(0===s.length||s.length>1)throw new Error("rules is invaild");var a=s[0];if(!t.includes(a))throw new Error("when rules is an object, rules'key should be on of [ "+t.join(", ")+" ]")}}function k(r,t){if("string"===typeof t){var e=t;return z.call(this,r,e)}if(Array.isArray(t))return x.call(this,r,t);var i=t,n=Object.keys(t)[0];return R(r,n,i[n])}function z(r,t){return this[t](r)}function R(r,t,e){switch(t){case">":return r>e;case">=":return r>=e;case"<":return r<e;case"<=":return r<=e;case"==":return r==e;default:return s(r,e)}}function x(r,t){for(var e=!0,i=0;i<t.length;i++){var n=t[i],s=typeof n;if("string"===s){var a=n;e=z.call(this,r,a)}else if("object"===s&&!Array.isArray(n)){var o=n,u=Object.keys(n)[0];e=R(r,u,o[u])}if(!e)return!1}return!0}function P(r,t,e,i){var n=!0;if(i&&i.length>0)for(var s=0;s<i.length;s++){var a=i[s];if(!a.hasOwnProperty("field"))throw new Error("field isn't exist");var o=a.field,u=a.rules;if(u||(u="isRequired"),O.call(this,o,u),r.hasOwnProperty(o)){var l=r[o];n=k.call(this,l,u)}}return!n||(e||(e="isRequired"),k.call(this,t,e))}function q(r,t){try{!function(r,t){if(!r||!E(r))throw new Error("parameter values is invalid in validate, it should be an object");if(!Array.isArray(t))throw new Error("parameter rules is invalid in validate, it should be an array")}(r,t);for(var e=0;e<t.length;e++){var i=t[e];if(!i.hasOwnProperty("field"))throw new Error("field isn't exist");var n=i.field,s=i.rules,a=i.need,o=i.tip;if(O.call(this,n,s,a,o),r.hasOwnProperty(n)){if(!P.call(this,r,r[n],s,a))return{res:!1,msg:o||n+" is error"};if(e===t.length-1)return{res:!0,msg:"success"}}}}catch(r){return{res:!1,msg:"failure"}}}return new function(){var r=this;this.isRequired=o,this.isEmpty=u,this.isEqual=l,this.isEmail=f,this.isMobile=c,this.isConcat=h,this.isWx=d,this.isName=y,this.isNumber=b,this.isPositiveInt=v,this.isBankcard=g,this.isAge=p,this.isMoney=w,this.isChinese=_,this.isEnglish=m,this.isUrl=j,this.isIdcard=A,this.validate=q,this.addRule=function(t,e){try{if(!t||"string"!=typeof t||"validate"===t||"addRule"===t)throw new Error("parameter \"key\" is invaild in addRule, \n            it should be string, and not allow be named 'validate' or 'addRule'. ");if(!e||"function"!=typeof e)throw new Error('parameter "cb" is invaild in addRule, it should be a function. ');r[t]=e}catch(r){}}}}));
